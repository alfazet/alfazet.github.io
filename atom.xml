<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>αzet</title>
    <link href="https://alfazet.github.io/atom.xml" rel="self"/>
    <link href="https:&#x2F;&#x2F;alfazet.github.io"/>
    <updated>2025-11-08T16:38:52+0000</updated>
    <id>https:&#x2F;&#x2F;alfazet.github.io</id>

    
    
    
    
        
    
    
    
        
        
            
            <entry>
                <title>Rust is all about patterns</title>
                <link href="https:&#x2F;&#x2F;alfazet.github.io&#x2F;blog&#x2F;rust-patterns&#x2F;"/>
                <updated>2025-11-08T00:00:00+0000</updated>
                <id>https:&#x2F;&#x2F;alfazet.github.io&#x2F;blog&#x2F;rust-patterns&#x2F;</id>
                <content type="html">&amp;lt;p&amp;gt;Everyone who is at least a bit familiar with Rust knows about the &amp;lt;code&amp;gt;match&amp;lt;&amp;#x2F;code&amp;gt; statement and how it matches the given value against patterns.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;p&amp;gt;Here’s a simple example of it:&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; n &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;= &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;14&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;match&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; n {
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;0 &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;amp;gt; &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;println!&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#b8bb26;&amp;quot;&amp;gt;&amp;amp;quot;n is zero&amp;amp;quot;&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;),
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;1&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;..=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;9 &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;amp;gt; &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;println!&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#b8bb26;&amp;quot;&amp;gt;&amp;amp;quot;n is a one-digit number&amp;amp;quot;&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;),
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;10 &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;| &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;11 &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;| &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;12 &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;amp;gt; &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;println!&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#b8bb26;&amp;quot;&amp;gt;&amp;amp;quot;n is in range [10, 12]&amp;amp;quot;&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;),
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;13&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;..=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;19 &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;amp;gt; &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;println!&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#b8bb26;&amp;quot;&amp;gt;&amp;amp;quot;n ends with `teen`&amp;amp;quot;&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;),
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;_ =&amp;amp;gt; &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;println!&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#b8bb26;&amp;quot;&amp;gt;&amp;amp;quot;n is some other number&amp;amp;quot;&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;),
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;}
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;Now, writing such code is possible in any programming language just by using a couple of &amp;lt;code&amp;gt;if&amp;lt;&amp;#x2F;code&amp;gt; statements. At worst it would just look less concise.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;p&amp;gt;However, Rust’s pattern matching is much more powerful than that. Namely, it allows us to reason about &amp;lt;em&amp;gt;the shape of data&amp;lt;&amp;#x2F;em&amp;gt;, not only its value. And that is an
immensly powerful concept that permeates through the language.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;p&amp;gt;And by “permeates” I really mean it.
Let’s take a look at the humble &amp;lt;code&amp;gt;let&amp;lt;&amp;#x2F;code&amp;gt; keyword. It’s most often used when declaring variables:&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; x &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;= &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;42&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; name &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;= &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#b8bb26;&amp;quot;&amp;gt;&amp;amp;quot;Ferris&amp;amp;quot;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;so you’d think that it works as follows:&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;VARIABLE &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;= &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;EXPRESSION
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;but you’d be wrong. In reality, the syntax is:&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;PATTERN &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;= &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;EXPRESSION
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;So even the first Rust keyword you learn is a pattern match under the hood!&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;p&amp;gt;Because of it, we don’t have to write code like:&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; p &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;= &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;0.0&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;, &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;2.137&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;, &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;3.14&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;);
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; x &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; p.&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;0&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; y &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; p.&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;1&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; z &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; p.&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;2&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;Instead, we can use this snippet which does the same, but in an elegant way.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; p &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;= &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;0.0&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;, &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;2.137&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;, &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#d3869b;&amp;quot;&amp;gt;3.14&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;);
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(x, y, z) &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; p;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;Let’s take a closer look at the last line - we’re declaring variables &amp;lt;code&amp;gt;x&amp;lt;&amp;#x2F;code&amp;gt;, &amp;lt;code&amp;gt;y&amp;lt;&amp;#x2F;code&amp;gt; and &amp;lt;code&amp;gt;z&amp;lt;&amp;#x2F;code&amp;gt; by matching &amp;lt;code&amp;gt;p&amp;lt;&amp;#x2F;code&amp;gt;
(which has a form of &amp;lt;code&amp;gt;(f32, f32, f32)&amp;lt;&amp;#x2F;code&amp;gt;) against the pattern &amp;lt;code&amp;gt;(x, y, z)&amp;lt;&amp;#x2F;code&amp;gt;. Clearly, the first number matches the &amp;lt;code&amp;gt;x&amp;lt;&amp;#x2F;code&amp;gt; “slot”, the second
the &amp;lt;code&amp;gt;y&amp;lt;&amp;#x2F;code&amp;gt; “slot” and the the &amp;lt;code&amp;gt;z&amp;lt;&amp;#x2F;code&amp;gt; “slot” - so we get &amp;lt;code&amp;gt;x = 0.0&amp;lt;&amp;#x2F;code&amp;gt;, &amp;lt;code&amp;gt;y = 2.137&amp;lt;&amp;#x2F;code&amp;gt; and &amp;lt;code&amp;gt;z = 3.14&amp;lt;&amp;#x2F;code&amp;gt;.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;p&amp;gt;The power of pattern matching also makes the following code invalid, since there’s no place for the third member
of &amp;lt;code&amp;gt;p&amp;lt;&amp;#x2F;code&amp;gt; in the left-hand side pattern.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(x, y) &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; p; &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;font-style:italic;color:#928374;&amp;quot;&amp;gt;&amp;#x2F;&amp;#x2F; doesn&amp;amp;#39;t compile
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;To finish up, let’s check out another example of pattern matching being a handy tool that saves lines of code.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;p&amp;gt;Imagine a 3D rendering engine that renders a simple scene with a light source and one object.
That object will have a lot of paramaters that describe the way light rays will interact with it - a color, a specular constant, a diffuse constant and more
(the specifics don’t matter here). Let’s say these parameters are stored in a stuct like the one here:&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;struct &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#8ec07c;&amp;quot;&amp;gt;SurfaceParams &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;{
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;color&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;: Rgb,
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;k_s&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;: &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;f32&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;,
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;k_d&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;: &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;f32&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;,
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;k_a&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;: &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;f32&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;,
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;font-style:italic;color:#928374;&amp;quot;&amp;gt;&amp;#x2F;&amp;#x2F; and more
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;}
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;Now let’s pass &amp;lt;code&amp;gt;SurfaceParams&amp;lt;&amp;#x2F;code&amp;gt; to a rendering function. Our first instinct is to pass a reference to the entire struct.
But then using individual parameters inside the function will become quite verbose.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;fn &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#8ec07c;&amp;quot;&amp;gt;render&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fdf4c1;&amp;quot;&amp;gt;surf_params&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;: &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;&amp;amp;amp;&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;SurfaceParams) {
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;font-style:italic;color:#928374;&amp;quot;&amp;gt;&amp;#x2F;&amp;#x2F; ...
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; specular &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; surf_params.k_s &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;*&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; surf_params.color &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;*
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;        angle.&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;cos&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;().&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;powf&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(surf_params.alpha) &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;*&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; light_color;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;font-style:italic;color:#928374;&amp;quot;&amp;gt;&amp;#x2F;&amp;#x2F; ...
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;}
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;To avoid constantly writing the &amp;lt;code&amp;gt;surf_params&amp;lt;&amp;#x2F;code&amp;gt; prefix, we could pass each parameter as a separate variable. But that isn’t an approach that scales well.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;p&amp;gt;Instead, let’s use the fact that &amp;lt;em&amp;gt;function parameters are patterns too&amp;lt;&amp;#x2F;em&amp;gt;.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;pre data-lang=&amp;quot;rust&amp;quot; style=&amp;quot;background-color:#282828;color:#fdf4c1aa;&amp;quot; class=&amp;quot;language-rust &amp;quot;&amp;gt;&amp;lt;code class=&amp;quot;language-rust&amp;quot; data-lang=&amp;quot;rust&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;fn &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#8ec07c;&amp;quot;&amp;gt;render&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(SurfaceParams { color, k_s, k_d, k_a, &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;font-style:italic;color:#928374;&amp;quot;&amp;gt;&amp;#x2F;* ... *&amp;#x2F;&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; }: &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;&amp;amp;amp;&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;SurfaceParams) {
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;font-style:italic;color:#928374;&amp;quot;&amp;gt;&amp;#x2F;&amp;#x2F; ...
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fa5c4b;&amp;quot;&amp;gt;let&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; specular &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;=&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; k_s &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;*&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; color &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;*&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; angle.&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;cos&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;().&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fabd2f;&amp;quot;&amp;gt;powf&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;(alpha) &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;color:#fe8019;&amp;quot;&amp;gt;*&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt; light_color;
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span style=&amp;quot;font-style:italic;color:#928374;&amp;quot;&amp;gt;&amp;#x2F;&amp;#x2F; ...
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;span&amp;gt;}
&amp;lt;&amp;#x2F;span&amp;gt;&amp;lt;&amp;#x2F;code&amp;gt;&amp;lt;&amp;#x2F;pre&amp;gt;
&amp;lt;p&amp;gt;The number of arguments of our function hasn’t exploded &amp;lt;em&amp;gt;and&amp;lt;&amp;#x2F;em&amp;gt; we don’t need to verbosely name the entire struct
every time we want to reference a parameter. I learned about this syntax only recently and I wish I had known it sooner, it’s so nice!&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;p&amp;gt;As you might expect, this isn’t all there is to pattern matching in Rust.
For the curious, an in-depth explanation is available &amp;lt;a rel=&amp;quot;noopener&amp;quot; target=&amp;quot;_blank&amp;quot; href=&amp;quot;https:&amp;#x2F;&amp;#x2F;doc.rust-lang.org&amp;#x2F;book&amp;#x2F;ch19-01-all-the-places-for-patterns.html&amp;quot;&amp;gt;here&amp;lt;&amp;#x2F;a&amp;gt;. It really is a powerful
feature of the language that often goes unnoticed.&amp;lt;&amp;#x2F;p&amp;gt;
</content>
            </entry>
            
        
    
</feed>
